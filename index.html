<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
      integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="row">
      <div class="col-12 listThing">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">id</th>
              <th scope="col" id="nameChart">name</th>
              <th scope="col" id="usernameChart">description</th>
              <th scope="col" id="emailchart">brand</th>
              <th scope="col">image</th>
              <th scope="col">price</th>
            </tr>
          </thead>
        </table>
      </div>
    </div>
    <div class="buttonpp">
      <button type="button" id="pressMe" class="btn btn-dark">
        <a href="/admin.html"> Admin side</a>
      </button>
    </div>
    <script>
      //get and display data from database in table as <td>
      const waitAsync = async () => {
        const response = await fetch(
          "https://striveschool-api.herokuapp.com/api/product/",
          {
            headers: {
              Authorization:
                "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MjU2YmU1Y2E5MDIzOTAwMTVkOTY1ZDIiLCJpYXQiOjE2NDk4NTE5OTcsImV4cCI6MTY1MTA2MTU5N30.TQYnKkDlROs_7efJxGJsqMnGPL3noBWXBtJo_jIJnIg",
            },
          }
        );
        const data = await response.json();
        console.log(data);
        const table = document.querySelector("table");
        data.forEach((product) => {
          const row = document.createElement("tr");
          const id = document.createElement("td");
          const name = document.createElement("td");
          const description = document.createElement("td");
          const brand = document.createElement("td");
          const image = document.createElement("td");
          const price = document.createElement("td");
          id.innerHTML = product._id;
          name.innerHTML = product.name;
          description.innerHTML = product.description;
          brand.innerHTML = product.brand;
          image.innerHTML = product.imageUrl;
          price.innerHTML = product.price;
          row.appendChild(id);
          row.appendChild(name);
          row.appendChild(description);
          row.appendChild(brand);
          row.appendChild(image);
          row.appendChild(price);
          table.appendChild(row);
        });
      };
      waitAsync();
    </script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
      crossorigin="anonymous"
    ></script>
    <script></script>
  </body>
</html>
